<div class="hp-main-layout-content">

    <div class="row mb-32 gy-32">
        <div class="col-12">
            <div class="row justify-content-between gy-32">
                <div class="col hp-flex-none w-auto">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item">
                                <a href="index.html">Home</a>
                            </li>
                            <li class="breadcrumb-item active">
                                Order Sampah
                            </li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
        <form id="form_payment">

            <div class="col-12">
                <div class="row g-32">
                    <div class="col-12 col-lg-9">
                        <div class="py-18 px-24 rounded border border-black-40 hp-border-color-dark-80 bg-black-0 hp-bg-color-dark-100 mb-32 overflow-scroll hp-scrollbar-x-hidden">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <span class="bg-white text-primary border-primary border rounded-circle me-8 hp-caption lh-normal d-flex align-items-center justify-content-center" style="min-width: 24px; height: 24px">
                                        <svg viewBox="64 64 896 896" focusable="false" data-icon="check" width="1em" height="1em" fill="currentColor" aria-hidden="true">
                                            <path d="M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"></path>
                                        </svg>
                                    </span>

                                    <a>
                                        <span class="text-black-80 hp-text-color-dark-0 text-nowrap">Order Details</span>
                                    </a>
                                </div>
                                <div class="divider flex-grow-1 border-primary mx-16"></div>

                                <div class="d-flex align-items-center">
                                    <span class="bg-primary text-white border-primary border rounded-circle me-8 hp-caption lh-normal d-flex align-items-center justify-content-center" style="min-width: 24px; height: 24px">2</span>
                                    <a>
                                        <span class="text-black-100 hp-text-color-dark-0 text-nowrap">Pembayaran</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="row g-32">
                            <div class="col-12">
                                <div class="row g-32">
                                    <div class="col-12 col-md-6 col-lg-6">
                                        <div class="row g-32">
                                            <div class="col-12">
                                                <div class="d-flex justify-content-between flex-column rounded overflow-hidden hp-card-1 p-18" style="background-image: url(<?= base_url() ?>app-assets/img/dashboard/paypal-bg.svg); background-size: cover; background-position: right center;">
                                                    <div class="row justify-content-between">
                                                        <div class="col hp-flex-none w-auto">
                                                            <div class="row align-items-center">
                                                                <div class="col hp-flex-none w-auto">
                                                                    <img src="<?= base_url() ?>app-assets/img/dashboard/paypal-logo.svg" alt="Paypal" height="25">
                                                                </div>

                                                                <div class="col hp-flex-none w-auto">
                                                                    <span class="ms-12 hp-p1-body text-black-0">Paypal</span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col hp-flex-none w-auto">
                                                            <span class="hp-p1-body text-black-0">**** **** 1923</span>
                                                        </div>
                                                    </div>

                                                    <div class="row align-items-center justify-content-between">
                                                        <div class="col hp-flex-none w-auto">
                                                            <span class="h4 text-black-0">1.90124527</span>
                                                        </div>

                                                        <div class="col hp-flex-none w-auto">
                                                            <img src="<?= base_url() ?>app-assets/img/dashboard/mastercard-logo.png" alt="Mastercard">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-12">
                                                <div class="d-flex justify-content-between flex-column rounded overflow-hidden hp-card-1 p-18" style="background-image: url(<?= base_url() ?>app-assets/img/dashboard/googleplay-bg.svg); background-size: cover; background-position: right center;">
                                                    <div class="row justify-content-between">
                                                        <div class="col hp-flex-none w-auto">
                                                            <div class="row align-items-center">
                                                                <div class="col hp-flex-none w-auto">
                                                                    <img src="<?= base_url() ?>app-assets/img/dashboard/google-play-logo.svg" alt="Google Play" height="25">
                                                                </div>

                                                                <div class="col hp-flex-none w-auto">
                                                                    <span class="ms-12 hp-p1-body text-black-0">Google Play</span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col hp-flex-none w-auto">
                                                            <span class="hp-p1-body text-black-0">**** **** 1923</span>
                                                        </div>
                                                    </div>

                                                    <div class="row align-items-center justify-content-between">
                                                        <div class="col hp-flex-none w-auto">
                                                            <span class="h4 text-black-0">1.90124527</span>
                                                        </div>

                                                        <div class="col hp-flex-none w-auto">
                                                            <img src="<?= base_url() ?>app-assets/img/dashboard/mastercard-logo.png" alt="Mastercard">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-12 col-md-6 col-lg-6">
                                        <div class="row g-32">
                                            <div class="col-12">
                                                <div class="d-flex justify-content-between flex-column rounded overflow-hidden hp-card-1 p-18" style="background-image: url(<?= base_url() ?>app-assets/img/dashboard/netflix-bg.svg); background-size: cover; background-position: right center;">
                                                    <div class="row justify-content-between">
                                                        <div class="col hp-flex-none w-auto">
                                                            <div class="row align-items-center">
                                                                <div class="col hp-flex-none w-auto">
                                                                    <img src="<?= base_url() ?>app-assets/img/dashboard/netflix-logo.svg" alt="Netflix" height="25">
                                                                </div>

                                                                <div class="col hp-flex-none w-auto">
                                                                    <span class="ms-12 hp-p1-body text-black-0">BNI</span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col hp-flex-none w-auto">
                                                            <span class="hp-p1-body text-black-0">**** **** 1923</span><br>
                                                            <span class="hp-p1-body text-black-0">a/n : PT Bla Bla</span>
                                                        </div>
                                                    </div>

                                                    <div class="row align-items-center justify-content-between">
                                                        <div class="col hp-flex-none w-auto">
                                                            <span class="h4 text-black-0">1.90124527</span>
                                                        </div>

                                                        <div class="col hp-flex-none w-auto">
                                                            <img src="<?= base_url() ?>app-assets/img/dashboard/mastercard-logo.png" alt="Mastercard">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-12">
                                                <div class="d-flex justify-content-between flex-column rounded overflow-hidden hp-card-1 p-18" style="background-image: url(<?= base_url() ?>app-assets/img/dashboard/amazon-bg.svg); background-size: cover; background-position: right center;">
                                                    <div class="row justify-content-between">
                                                        <div class="col hp-flex-none w-auto">
                                                            <div class="row align-items-center">
                                                                <div class="col hp-flex-none w-auto">
                                                                    <img src="<?= base_url() ?>app-assets/img/dashboard/amazon-logo.svg" alt="Amazon" height="25">
                                                                </div>

                                                                <div class="col hp-flex-none w-auto">
                                                                    <span class="ms-12 hp-p1-body text-black-0">Amazon</span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col hp-flex-none w-auto">
                                                            <span class="hp-p1-body text-black-0">**** **** 1923</span>
                                                        </div>
                                                    </div>

                                                    <div class="row align-items-center justify-content-between">
                                                        <div class="col hp-flex-none w-auto">
                                                            <span class="h4 text-black-0">1.90124527</span>
                                                        </div>

                                                        <div class="col hp-flex-none w-auto">
                                                            <img src="<?= base_url() ?>app-assets/img/dashboard/mastercard-logo.png" alt="Mastercard">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="p-16 p-sm-24 rounded border border-black-40 hp-border-color-dark-80 bg-black-0 hp-bg-color-dark-100">
                                    <h3 class="mb-24 text-black-80 hp-text-color-dark-0">
                                        Konfirmasi Pembayaran
                                    </h3>

                                    <div class="row g-24">
                                        <div class="col-12 col-md-6">
                                            <label for="payment_name" class="form-label">
                                                <span class="text-danger me-4">*</span>Atas Nama
                                            </label>
                                            <input type="hidden" class="form-control" id="id_pesanan" name="id_pesanan" value="<?= $dataContent['id_pesanan'] ?>" />
                                            <input type="text" class="form-control" id="payment_name" name="payment_name" required />
                                        </div>

                                        <div class="col-12 col-md-6">
                                            <label for="payment_method" class="form-label">
                                                <span class="text-danger me-4">*</span>Metode
                                            </label>
                                            <select class="form-control" id="payment_method" name="payment_method" required>
                                                <option value=""> </option>
                                                <?php
                                                foreach ($refPayment as $ref) {
                                                    echo "<option value='" . $ref['id_ref_payment'] . "'> " . $ref['label_payment'] . " </option>";
                                                }
                                                ?>
                                            </select>
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <label for="file_payment" class="form-label">
                                                <span class="text-danger me-4">*</span>Foto Bukti Bayar
                                            </label>
                                            <input type="file" class="form-control" id="file_payment" name="file_payment" aria-describedby="" required />
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 col-lg-3">
                        <div class="p-24 rounded border border-black-40 hp-border-color-dark-80 bg-black-0 hp-bg-color-dark-100">
                            <h3 class="mb-0 text-black-80 hp-text-color-dark-0">Summary</h3>
                            <div class="row mt-8">
                                <div class="col-12 mt-8">
                                    <div class="row align-items-center justify-content-between">
                                        <div class="col-6 hp-input-description text-black-80 hp-text-color-dark-30">Suptotal</div>
                                        <div class="col-6 text-end hp-p1-body fw-medium text-primary" id="sub_total">Rp <?= number_format($dataContent['est_berat_rp'] + $dataContent['jarak_rp'], 0, '.', '.')  ?></div>
                                    </div>
                                </div>
                                <!-- <div class="col-12 mt-8">
                                    <div class="row align-items-center justify-content-between">
                                        <div class="col-6 hp-input-description text-black-80 hp-text-color-dark-30">Tax</div>
                                        <div class="col-6 text-end hp-p1-body fw-medium text-primary" id="tax">$7.8</div>
                                    </div>
                                </div> -->
                            </div>

                            <div class="row mt-16">
                                <div class="col-12">
                                    <div class="row align-items-center justify-content-between">
                                        <div class="col-6 h5 fw-medium text-primary">Total</div>
                                        <div class="col-6 h5 text-end hp-p1-body fw-medium text-primary" id="total">Rp <?= number_format($dataContent['est_berat_rp'] + $dataContent['jarak_rp'], 0, '.', '.')  ?></div>
                                    </div>
                                </div>

                                <div class="col-12 mt-16">
                                    <button type="submit" class="btn btn-primary w-100">
                                        Next Step
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.1/dist/leaflet.css" integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin="" />
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
<script src="https://unpkg.com/leaflet@1.9.1/dist/leaflet.js" integrity="sha256-NDI0K41gVbWqfkkaHj15IzU7PtMoelkzyKp8TOaFQ3s=" crossorigin=""></script>
<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>


<script>
    $(document).ready(function() {
        var form = $('#form_payment');
        form.submit(function(event) {
            event.preventDefault();
            var url = "<?= base_url('customer/process_two_sampah') ?>";
            Swal.fire({
                title: "Apakah anda Yakin?",
                text: "Data Disimpan!",
                icon: "warning",
                allowOutsideClick: false,
                showCancelButton: true,
                buttons: {
                    cancel: 'Batal !!',
                    catch: {
                        text: "Ya, Saya Simpan !!",
                        value: true,
                    },
                },
            }).then((result) => {
                if (!result.isConfirmed) {
                    return;
                }
                swalLoading();
                $.ajax({
                    url: url,
                    'type': 'POST',
                    data: new FormData(form[0]),
                    contentType: false,
                    processData: false,
                    success: function(data) {
                        // buttonIdle(button);
                        var json = JSON.parse(data);
                        if (json['error']) {
                            Swal.fire("Simpan Gagal", json['message'], "error");
                            return;
                        }
                        // var user = json['data']
                        // dataUser[user['id']] = user;
                        Swal.fire("Simpan Berhasil", "", "success").then((result) => {
                            location.href = "<?= base_url('history') ?>";
                        })
                    },
                    error: function(e) {}
                });
            });
        });
    });
</script>